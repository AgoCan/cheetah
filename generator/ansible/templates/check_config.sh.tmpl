#!/bin/bash
# 检测用户配置的config.ini是否正确

function check_ip(){
    ip_address=$1
    ip_regex='^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$'

    if [[ $ip_address =~ $ip_regex ]]; then
        echo "$ip_address 是合法的 IP 地址"
    else
        echo "$ip_address 不是合法的 IP 地址"
    fi
}

function check_config(){
    IFS=$'\n'
    for line in $BASE
    do
        unset IFS
        array=(${line})
        ip_address=${array[0]}
        check_ip $ip_address
    done
    unset IFS
}